% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PEAXAI_ranking.R
\name{PEAXAI_ranking}
\alias{PEAXAI_ranking}
\title{Generate Efficiency Rankings Based on Probabilistic Classification}
\usage{
PEAXAI_ranking(
  data,
  x,
  y,
  final_model,
  efficiency_thresholds,
  targets,
  rank_basis
)
}
\arguments{
\item{data}{A \code{data.frame} or \code{matrix} containing the input and output variables.}

\item{x}{Integer vector specifying the column indices of input variables in \code{data}.}

\item{y}{Integer vector specifying the column indices of output variables in \code{data}.}

\item{final_model}{A fitted classification model used to estimate efficiency probabilities.
Supported types are:
\itemize{
\item \code{"train"}: an object fitted with \pkg{caret}.
\item \code{"glm"}: a binomial logistic regression model.
}}

\item{efficiency_thresholds}{Numeric vector defining one or more efficiency probability
thresholds to determine the attainable frontier or peer set.}

\item{targets}{A named list containing, for each efficiency threshold, the corresponding
attainable targets and estimated \eqn{\beta} values (e.g., obtained from counterfactual analysis).
Each element should be a list with a component named \code{"beta"}.}

\item{rank_basis}{Character string specifying the ranking criterion. Options are:
\itemize{
\item \code{"predicted"}: order units by predicted efficiency probability.
\item \code{"attainable"}: order by attainable probability, then by \eqn{\beta},
and finally by predicted probability (see Details).
}}
}
\value{
\itemize{
\item If \code{rank_basis = "predicted"}: a \code{data.frame} sorted by predicted efficiency probability.
\item If \code{rank_basis = "attainable"}: a named list of \code{data.frame}s, one per efficiency threshold,
each sorted according to the hierarchical ranking scheme described above.
}
}
\description{
Produces efficiency rankings of decision-making units (DMUs) according to the probabilities
estimated by a fitted classification model. Two ranking modes are supported:
\itemize{
\item \code{"predicted"}: ranks DMUs solely by their predicted probability of being efficient.
\item \code{"attainable"}: ranks DMUs hierarchically according to:
(1) the attainable (target) efficiency probability,
(2) the size of the improvement parameter \eqn{\beta} (smaller is better),
and (3) the predicted efficiency probability (higher is better).
}
This allows to integrate both predictive and counterfactual (attainable) information
into the efficiency ranking.
}
\details{
The attainable-based ranking combines predictive efficiency with the modeled potential
for improvement (\eqn{\beta}) and the probability of reaching a target frontier level.
This approach yields a more nuanced and interpretable prioritization of DMUs, reflecting
both their current and achievable performance under the estimated model.

When \code{rank_basis = "attainable"}, ties in attainable probability are broken first
by the magnitude of \eqn{\beta} (ascending), and then by the predicted probability
(descending).
}
\examples{
\dontrun{
# Example with caret model:
model <- caret::train(x = ..., y = ..., method = "rf", ...)
rankings <- PEAXAI_ranking(
  data = mydata,
  x = 1:3, y = 4:5,
  final_model = model,
  efficiency_thresholds = c(0.8, 0.9),
  targets = my_targets,
  rank_basis = "attainable"
)
}

}
